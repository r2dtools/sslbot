#ATTENTION!
#
#DO NOT MODIFY THIS FILE BECAUSE IT WAS GENERATED AUTOMATICALLY,
#SO ALL YOUR CHANGES WILL BE LOST THE NEXT TIME THE FILE IS GENERATED.
#IF YOU REQUIRE TO APPLY CUSTOM MODIFICATIONS, PERFORM THEM IN THE FOLLOWING FILES:
<IfModule mod_ssl.c>

        <VirtualHost *:80 >
                ServerName "example.com"
                ServerAlias "www.example.com"
                ServerAlias "ipv4.example.com"
                UseCanonicalName Off


                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined

                # mailconfig
                <IfModule mod_proxy_http.c>
                        <IfModule mod_rewrite.c>
                                RewriteEngine On
                                RewriteCond %{REQUEST_URI} ^/autodiscover/autodiscover\.xml$ [NC,OR]
                                RewriteCond %{REQUEST_URI} ^(/\.well-known/autoconfig)?/mail/config\-v1\.1\.xml$ [NC,OR]
                                RewriteCond %{REQUEST_URI} ^/email\.mobileconfig$ [NC]
                                RewriteRule ^(.*)$ http://127.0.0.1:8880/mailconfig/ [P,QSA,L,E=REQUEST_URI:%{REQUEST_URI},E=HOST:%{HTTP_HOST}]
                        </IfModule>
                        <Proxy "http://127.0.0.1:8880/mailconfig/">
                                RequestHeader set X-Host "%{HOST}e"
                                RequestHeader set X-Request-URI "%{REQUEST_URI}e"
                        </Proxy>
                </IfModule>
                # mailconfig

                DocumentRoot "/var/www/html"

                <IfModule mod_suexec.c>
                        SuexecUserGroup "example.com_bc8fzauq68v" "psacln"
                </IfModule>

                <IfModule mod_sysenv.c>
                        SetSysEnv PP_VHOST_ID "08fc3720-4f9b-4648-b1b2-4362a6319f4f"
                </IfModule>

                SSLEngine on
                SSLVerifyClient none
                SSLCertificateFile /usr/local/r2dtools/var/default/certificates/example.com.pem

                <Directory /var/www/html> # test inline comment
                        # test comment
                        SSLRequireSSL

                        Options -Includes -ExecCGI

                </Directory>

                DirectoryIndex "index.html" "index.cgi" "index.pl" "index.php" "index.xhtml" "index.htm" "index.shtml"

                <Directory /var/www/html>
                        Options -FollowSymLinks
                        AllowOverride AuthConfig FileInfo Indexes Limit Options=Indexes,SymLinksIfOwnerMatch,MultiViews,ExecCGI,Includes,IncludesNOEXEC
                </Directory>

                #extension sslit begin

                #extension sslit end

                #extension letsencrypt begin
                Alias /.well-known/acme-challenge "/var/www/vhosts/default/htdocs/.well-known/acme-challenge"

                <Location /.well-known/acme-challenge/>
                        # Require all granted
                        Order Deny,Allow
                        Allow from all
                        Satisfy any
                </Location>

                <LocationMatch "^/.well-known/acme-challenge/(.*/|)\.">
                        # Require all denied
                        Order Allow,Deny
                        Deny from all
                </LocationMatch>
                #extension letsencrypt end
        </VirtualHost>

</IfModule>

<VirtualHost 127.0.0.1:7080 >
        ServerName "example.com"
        ServerAlias "www.example.com"
        ServerAlias "ipv4.example.com"
        UseCanonicalName Off

        # mailconfig
        <IfModule mod_proxy_http.c>
                <IfModule mod_rewrite.c>
                        RewriteEngine On
                        RewriteCond %{REQUEST_URI} ^/autodiscover/autodiscover\.xml$ [NC,OR]
                        RewriteCond %{REQUEST_URI} ^(/\.well-known/autoconfig)?/mail/config\-v1\.1\.xml$ [NC,OR]
                        RewriteCond %{REQUEST_URI} ^/email\.mobileconfig$ [NC]
                        RewriteRule ^(.*)$ http://127.0.0.1:8880/mailconfig/ [P,QSA,L,E=REQUEST_URI:%{REQUEST_URI},E=HOST:%{HTTP_HOST}]
                </IfModule>
                <Proxy "http://127.0.0.1:8880/mailconfig/">
                        RequestHeader set X-Host "%{HOST}e"
                        RequestHeader set X-Request-URI "%{REQUEST_URI}e"
                </Proxy>
        </IfModule>
        # mailconfig

        <IfModule mod_rewrite.c>
                RewriteEngine On
                RewriteCond %{HTTPS} off
                RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L,QSA]
        </IfModule>
</VirtualHost>
